<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>あきんどカルタゲーム</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f5f5;
      color: #222;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 12px;
    }

    .game-container {
      width: 100%;
      max-width: 480px;
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
      padding: 16px 16px 20px;
    }

    header {
      text-align: center;
      margin-bottom: 12px;
    }

    header h1 {
      font-size: 20px;
      margin-bottom: 4px;
    }

    header p {
      font-size: 12px;
      color: #666;
    }

    .status-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
      margin-bottom: 8px;
      color: #555;
    }

    .status-bar span {
      min-width: 80px;
    }

    .leading-kana {
      text-align: center;
      margin: 8px 0;
      font-size: 40px;
      font-weight: bold;
    }

    .full-phrase {
      text-align: center;
      margin: 4px 0 10px;
      min-height: 24px;
      font-size: 14px;
      color: #333;
    }

    .cards-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
      margin-bottom: 8px;
    }

    .card {
      position: relative;
      background: #fafafa;
      border-radius: 12px;
      overflow: hidden;
      border: 2px solid transparent;
      cursor: pointer;
      transition: transform 0.12s ease, box-shadow 0.12s ease, border-color 0.12s ease;
      min-height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .card img {
      width: 100%;
      height: auto;
      display: block;
      object-fit: cover;
    }

    .card.disabled {
      cursor: default;
      opacity: 0.7;
    }

    .card:hover:not(.disabled) {
      transform: translateY(-1px);
      box-shadow: 0 3px 8px rgba(0,0,0,0.08);
    }

    .card.correct {
      border-color: #2e7d32;
    }

    .card.wrong {
      border-color: #c62828;
    }

    .kana-cover {
      position: absolute;
      top: 4px;
      right: 4px;
      width: 56px;
      height: 56px;
      background: #ffffff;
      box-shadow: 0 0 4px rgba(255,255,255,0.8);
    }

    .info-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
      margin: 6px 0;
      color: #555;
    }

    .timer {
      font-variant-numeric: tabular-nums;
    }

    .score {
      font-variant-numeric: tabular-nums;
      font-weight: 600;
    }

    .message {
      min-height: 20px;
      font-size: 13px;
      margin: 4px 0;
    }

    .message.ok {
      color: #2e7d32;
    }

    .message.ng {
      color: #c62828;
    }

    .explanation {
      margin-top: 6px;
      font-size: 12px;
      line-height: 1.5;
      background: #f8f8f8;
      border-radius: 8px;
      padding: 8px;
      max-height: 140px;
      overflow-y: auto;
    }

    .buttons {
      margin-top: 10px;
      display: flex;
      justify-content: center;
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 8px 20px;
      font-size: 14px;
      cursor: pointer;
      background: #1976d2;
      color: #fff;
      font-weight: 600;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      transition: opacity 0.12s ease, transform 0.12s ease, box-shadow 0.12s ease;
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: default;
      box-shadow: none;
      transform: none;
    }

    .btn:not(:disabled):active {
      transform: translateY(1px);
      box-shadow: 0 1px 3px rgba(0,0,0,0.18);
    }

    .final-result {
      margin-top: 8px;
      font-size: 13px;
      text-align: center;
      color: #333;
    }

    @media (max-width: 360px) {
      .game-container {
        padding: 12px;
      }
      .leading-kana {
        font-size: 32px;
      }
    }
  </style>
</head>
<body>
  <div class="game-container">
    <header>
      <h1>あきんどカルタ</h1>
      <p>「あきんどの精神」を学ぶカルタゲーム</p>
    </header>

    <div class="status-bar">
      <span id="questionCount">第1問</span>
      <span id="progress"></span>
    </div>

    <div class="leading-kana" id="leadingKana">あ</div>
    <div class="full-phrase" id="fullPhrase"></div>

    <div class="cards-grid" id="cardsGrid">
      <!-- 絵札カードをここにJSで生成 -->
    </div>

    <div class="info-bar">
      <span class="timer">タイマー：<span id="timerText">--.-</span> 秒</span>
      <span class="score">スコア：<span id="scoreText">0</span> 点</span>
    </div>

    <div class="message" id="message"></div>

    <div class="explanation" id="explanation" style="display:none;"></div>

    <div class="buttons">
      <button class="btn" id="nextButton" style="display:none;">次の問題へ</button>
    </div>

    <div class="final-result" id="finalResult"></div>
  </div>

  <script>
    // ====== 設定値 ======
    const MAX_TIME_MS = 10000;         // 絵札表示からの制限時間（ミリ秒）
    const POINTS_PER_SECOND = 10;      // 1秒あたりの加点
    const WRONG_PENALTY = -20;         // 不正解 & 時間切れペナルティ

    // ====== 使うかなの一覧 ======
    const kanaList = [
      "あ","い","う","え","お",
      "か","き","く","け","こ",
      "さ","し","す","せ","そ",
      "た","ち","つ","て","と",
      "な","に","ぬ","ね","の",
      "は","ひ","ふ","へ","ほ",
      "ま","み","む","め","も",
      "や","ゆ","よ",
      "ら","り","る","れ","ろ",
      "わ","を","ん"
    ];

    // かな → ファイル名のキー（.jpg は後で付ける）
    const kanaToFileKey = {
      "あ": "a",
      "い": "i",
      "う": "u",
      "え": "e",
      "お": "o",

      "か": "ka",
      "き": "ki",
      "く": "ku",
      "け": "ke",
      "こ": "ko",   // 札は「ご」だがファイル名は ko.jpg

      "さ": "sa",
      "し": "si",
      "す": "su",
      "せ": "se",
      "そ": "so",

      "た": "ta",
      "ち": "ti",
      "つ": "tu",
      "て": "te",
      "と": "to",

      "な": "na",
      "に": "ni",
      "ぬ": "nu",
      "ね": "ne",
      "の": "no",

      "は": "ha",
      "ひ": "hi",
      "ふ": "hu",
      "へ": "he",
      "ほ": "ho",

      "ま": "ma",
      "み": "mi",
      "む": "mu",
      "め": "me",
      "も": "mo",

      "や": "ya",
      "ゆ": "yu",
      "よ": "yo",

      "ら": "ra",
      "り": "ri",
      "る": "ru",
      "れ": "re",
      "ろ": "ro",

      "わ": "wa",
      "を": "wo",
      "ん": "n"
    };

    // ====== 問題データ======
    const questions = [
  {
    "id": "q1",
    "kana": "あ",
    "leadingKana": "あ",
    "fullPhrase": "あ：あかんモンはあかん",
    "explanation": "いろいろと事情はあります。 事情がないというコトの方が少\nないでしょう。でも、どんな事情があっても商人の正義に反\nすることに手をつけては駄目です。 ここに議論はありません。\nキッパリと言い切りましょう。 \nところが、 「あかん、あかん言うとったらあかん」でもあり\nます。 一度や二度の挑戦で結果が出ないといって諦めてはい\nけない、という意味です。注意しましょう。 "
  },
  {
    "id": "q2",
    "kana": "い",
    "leadingKana": "い",
    "fullPhrase": "い：いつだって 3％と 1/3",
    "explanation": "商いの道にはゴールも正解もありませんが、 無駄を省く事は、\n基本の心得です。\nこの実践は2つです。乾いた雑巾を絞るのは、 普段の3％に目を\n光らせることです。 常に丁寧に意識していないと見えてこない\nモノがそんな所に隠れているコトもあるのです。\n\nもう一つが何もせずにじっと見て、 じっと眺めて大きく 1/3を\n削減する、です。\n前者は普段の心掛け、後者は運と思考の賜物です。何時も複\n数のやり方を考えているのが商人です。"
  },
  {
    "id": "q3",
    "kana": "う",
    "leadingKana": "う",
    "fullPhrase": "う：ウソつくな ウソつくときは 己も騙せ",
    "explanation": "商いにウソはいけません。ですが、時には「奥さま、今日もお\n美しい」のお世辞も必要ですし、覚悟を示す時には「あきんど\n人生を賭けまっせ」などと言います。事実ではありませんが、\n一々ウソだと咎められることはありません。 全くのウソではな\nい「大げさな表現」と言える所まではセーフなのです。\nだったら、 本気で言える所まで自分を騙してでも思い込むのが\n商人です。商人はウソをついてはいけないのです。"
  },
  {
    "id": "q4",
    "kana": "え",
    "leadingKana": "え",
    "fullPhrase": "え：ええんです 自分のことは ええんです",
    "explanation": "私心を出してはいけません。商売第一の徹頭徹尾です。商い\nの判断に「私」が出てくるようでは駄賃に飴玉もらって喜ん\nでいる小僧の道を出ていません。いつまでも先代の番頭はん\nのままなのです。\n「私」を出して見せたら相手の思う壺です。 こちらの「弱み」\nを見せるのですから、それを逆手に搦めとられるのが関の山で\nす。商いでは、 お客様の「私」を喜ばせるために、自分の「私」\nを殺してこそ、商いにかける想いが相手に伝わるので\nす。逆に、手ごわい商売人ほど、 「私」をくすぐるのが上手\nです。入口でピシャッとやらないと、手玉に取られてしまい\nます。"
  },
  {
    "id": "q5",
    "kana": "お",
    "leadingKana": "お",
    "fullPhrase": "お：お空に向かって唾吐くな",
    "explanation": "昔からの言葉に、お天道さんが見てますよ、というのがあり\nます。人の見ていないところで悪い事をしてはいけない、と\nいう意味です。\n商売の世界では、悪い自分と決別しなければなりません。 「悪\nさをする」コトまではしないにしても、 自分を正当化し過\nぎて、悪さしているコトに気が付かないことがあります。最\nも悪いのは、この「気が付いていない」コトなのです。\n「いやぁ、そこまで言われると・・・」と思うくらい自分の\n事を省みるのが商人の心構えです。 影で故意に吐いた唾が、\nいつの間にか、お空から自分に降ってこぬようにしたいもの\nです。"
  },
  {
    "id": "q6",
    "kana": "か",
    "leadingKana": "か",
    "fullPhrase": "か：かなんなぁ 人のせいにすんのは かなんなぁ",
    "explanation": "かなんなぁ、の一言も言いたくなることがあります。ですが、\nその愚痴を自分で言っていないか注意が必要です。 人のせい\nにして愚痴るのを聞いてくれる人は、たくさんいます。皆さん\n優しいのです。\nでも、自分が人を責めている姿を見て、 商いの相手はどう思\nうでしょうか。 「そういう人なのだな」と思う事でしょう。\n心の底では、「自分のせいにされたくないなぁ」と感じる事で\nしょう。\n人のせいにする人は、最初は上手くやり過ごせてもやがて商\n売の相手を無くしていくのです。"
  },
  {
    "id": "q7",
    "kana": "き",
    "leadingKana": "き",
    "fullPhrase": "き：気持ちがええなら それでええねん",
    "explanation": "昔から、清々しい気持ちで過ごす事が大切だと言われます。\nこれは、天に対しても、人に対しても、 自分に対しても気持\nちの良い関係を作れているという事です。\nどんなに名案を思いついても、 誰かの気持ちを傷つけること\nで成り立つ商いは「気持ちが悪い」のです。 そんなコトをし\nていたら間違いなくやがて自分に返ってきます。\n「気持ちがええ」と感じられるかどうかは、 想像力があるか\nどうかに掛かっています。 商いの相手の気持ち、 第三者の気\n持ち、自分の気持ち。 どこまで心を馳せられるかどうかなの\nです。"
  },
  {
    "id": "q8",
    "kana": "く",
    "leadingKana": "く",
    "fullPhrase": "く：苦労して 掴んだものは なんじゃらな",
    "explanation": "散々苦労して手にしたモノが大して意味のないモノである\nことは、よくあることです。お金や地位の他に信任などの場合\nもあります。\n本当に必要なモノかどうか。これを先に理解していないと目\nの前のモノに振り回されてしまいます。 それが真の目的と重\nなっていなかったら残念な方向にひた走っていくこともある\nのです。対処法は、「常に真の目的を考える」ことです。"
  },
  {
    "id": "q9",
    "kana": "け",
    "leadingKana": "け",
    "fullPhrase": "け：計画より 仕上げが大事",
    "explanation": "計画も大事です。でも、計画が良くても、実行が伴わない時\nがあります。 「つもり」や「はず」で仕事は成せません。実\n行して、仕事を仕上げてこそ商いです。\n特に、「我々の仕事はここまでです」 などと言ってしまうと、\n自分でクビをしめてしまいがちです。 仕事は過程ではなく、\n結果が出て初めて成し遂げたと言えるのです。\n成果を出さなければ意味がない。という厳しい環境では、常に\n実行力が問われているのです。頑張ったから丸をもらえるのは\n学校です。"
  },
  {
    "id": "q10",
    "kana": "こ",
    "leadingKana": "こ",
    "fullPhrase": "こ：ゴミが落ちていたら拾うんです",
    "explanation": "自分のお店にゴミが落ちていたら拾うんです。丁稚も、女子\n衆も、番頭はんも、旦那さんもです。これが拾えなくなった\nら、福の神が出て行って、貧乏神が軒先をうろつくのです。\n理屈ではありません。 お店や会社が綺麗であったら良いとい\nう事でもありません。\n特に意識しなくてもゴミを拾えないようでは商人の資格が\nないのです。"
  },
  {
    "id": "q11",
    "kana": "さ",
    "leadingKana": "さ",
    "fullPhrase": "さ：探す工夫せえ",
    "explanation": "困っているお客様も、値打ちのある商品も、可能性のある商\n売も、自分の周りに増やせていない「縁」も、当てはまるもの\nすべてを、誰かがひいひい言って絞り出して、自分の目の前\nに運んで来てくれるわけではありません。\n運んで来てくれた選択肢から選ぶのは、消費者の役回りで\nあり、自分と縁があったモノを選ぶのが商人の役回りです。\n\nそのためには、目をこすって心を磨いておく工夫が要るので\nす。 "
  },
  {
    "id": "q12",
    "kana": "し",
    "leadingKana": "し",
    "fullPhrase": "し：幸せは 信じて待っとけ",
    "explanation": "幸せになりたい。それは誰しも当然の事です。でも、幸せを\n一生懸命に追いかけるのは少し違います。 いつも幸せの指標\nを探し回っている状態であり、 「今」に対して不満足である\nことと同じだからです。\n幸せになる条件は、人それぞれあるのでしょう。でも、幸せ\nを得ている人は、幸せが向こうから訪れてくるのを待ってい\nます。 人の縁を大切にし、目の前にある事に一生懸命になる\nのです。勘違いしてはいけないのは、「どうだ俺は幸せだろ\nう」と我を押し出すことではありません。"
  },
  {
    "id": "q13",
    "kana": "す",
    "leadingKana": "す",
    "fullPhrase": "す：好きな人を喜ばせるために 働け",
    "explanation": "好きな人は誰でしょう。お客さま、従業員、友人、 家族・・・。\n好きな人の笑顔はたまらなく嬉しいものです。 そして、その\n笑顔を思い浮かべながら働くと活力が湧いてきます。\n「誰かのために」働くのです。 自分のためではありません。\nもちろん、自分の家族を思う気持ちも大切です。いざという\n時に頼りになる、自分の意思をわかってくれる味方です。で\nも、「仕事を通じて喜ばせたい人」がしっかり描けているか\nどうかが商いの基本です。"
  },
  {
    "id": "q14",
    "kana": "せ",
    "leadingKana": "せ",
    "fullPhrase": "せ：背中を預けられる相手を作れ",
    "explanation": "背中を預けられる相手。それは、家族であり、会社であり、\n仲間です。\n一朝一夕に得られるものではありません。ある程度の時間を\n掛けて、信頼関係を築いてゆかなければなりません。\n何かの拍子に、「この人とならどこまでも一緒にやって行け\nる」という人が現れることがあります。これは、巡り合わせ\nの運のように見えますが、そういう人が現れた時に気づける\nかどうかは、そもそも誰かのために生きようとしているかど\nうかに掛かっています。"
  },
  {
    "id": "q15",
    "kana": "そ",
    "leadingKana": "そ",
    "fullPhrase": "そ：そりゃあ しゃあないわなぁ そんな時もある",
    "explanation": "どれだけ頑張っていても、時に上手くいかないことがありま\nす。それはそういう「巡り合わせ」なのです。\n努力をしなくていい、という意味ではありません。むしろ、\n必死で努力していても、どうにもこうにも状況が改善しない\nことがあるという意味です。\n「しゃあないからやめよか」という事ではありませんが、\n一旦肩の力を抜いて、休憩を入れるタイミングだという事\nです。\n心のどこかで、「そんな時もあるさ」というスタンスを持\nっておくことが、粘り強く前に進める秘訣です。"
  },
  {
    "id": "q16",
    "kana": "た",
    "leadingKana": "た",
    "fullPhrase": "た：楽しんでる？",
    "explanation": "仕事を楽しむ。人生を楽しむ。 趣味の世界に没頭する事。ど\nれも大事です。 中でも、商いをする商人にとって大切なの\nは、自分の働きへの姿勢です。\n「つまらないなぁ」と思っている人から商いを受けたいと思\nう人はいないでしょう。必死であったとしても、 自分の働き\nが楽しいと思えているかどうかは、とても大切な要素です。\n感動を増やす工夫をしているでしょうか。仕事の中に楽しさ\nを見出す工夫をしているでしょうか。そういった細かな心掛\nけの積み重ねが、商人としての凄みの差に繋がってきます。"
  },
  {
    "id": "q17",
    "kana": "ち",
    "leadingKana": "ち",
    "fullPhrase": "ち：知ったかぶりしたらあかんで",
    "explanation": "知ったかぶりは、 相手の話を拝聴せず自分の物差しだけで\n喋ってしまうことです。「そんな事は百も承知」と言う前\nに、相手に「そうだったのですか」としっかり聞いてから\nでも遅くはありません。\n商売は数値や道理だけで成り立っているのではなく、人の\n想いや状況が複雑に絡んでいるので、一人だけですべてを\n分かっているという事はないのです。 　　　　\n\n黙って聞く。ということは、寡黙な人になれ、ということ\nではなく、「耳を傾けて、相手の話をよく聞いてからで\nも良いのではないか」ということです。"
  },
  {
    "id": "q18",
    "kana": "つ",
    "leadingKana": "つ",
    "fullPhrase": "つ：強がるな わきまえ たまえ",
    "explanation": "普段から謙虚にしていれば、 あえて強がる必要はありませ\nん。しかし、商売の世界は狐と狸の化かし合い。腹のうちの\n探り合いも日常茶飯事です。\nそういう時にむやみに強がって相手を責め立てても意味\nがありません。力のない者が強がるのは、 もっと意味があ\nりません。\nかと言って、萎縮紙してしまうのも良くありません。 「わ\nきまえる」のです。 自分の立場をわきまえて、やるべきこ\nとをやる。 その姿に相手も敬意を抱くようになります。"
  },
  {
    "id": "q19",
    "kana": "て",
    "leadingKana": "て",
    "fullPhrase": "て：手に入れたもんより 手放すもんが大事やで",
    "explanation": "あれもこれも手に入れたい。そう思うことは自然なことです。\nでも、あまりに手に入れることばかりに囚われていると足元\nがお留守になってきます。 大切なものの多くは、自分が執着\nしているものが部分的に重なっているからであり、そもそ\nも自分が握りしめている「何か」が邪魔しているのです。\n割り切って手放す。すると手放したモノの何割かが、自分の\n元に戻ってくるのです。\n手に入れたものを増やすより、何を手放すのか。 そこに本当\nのセンスが問われるのです。"
  },
  {
    "id": "q20",
    "kana": "と",
    "leadingKana": "と",
    "fullPhrase": "と：とり返しのつかんことを したらあかんで",
    "explanation": "誰にでも、 「しまった」という事はあります。ですが、そん\nな事の多くは、挽回可能です。 落ち込む必要は、ありません。\nかと言って何でもして良い訳ではない。 商いの世界は、お客\n様あっての商売であり、特に信頼を損なうような事をすれば\n取り返しがつかなくなります。\n損得勘定で、どうしても「甘い誘惑」に心を動かされる事\nがあります。 そんな時にこそ、輪徳の精神を心に描き、誠\n実に判断できるように心掛けたいものです。"
  },
  {
    "id": "q21",
    "kana": "な",
    "leadingKana": "な",
    "fullPhrase": "な：なんとかなる、と思っとけ",
    "explanation": "いつも、「なんとかなる」と思っていれば良いのです。も\nちろん、なんとかするための工夫と行動を伴わせなければな\nらないのですが、「なんとかならない」と諦めてしまった\n時点で、その商いの心は終わってしまいます。\nどうすれば良いのか。\n方法がすぐに見つからなくても、「なんとかなる」と信じ\n続ける力は、商いに関わる者として必要な根性です。\n努力の結果がすぐに出なくても、「ここまでやってきたん\nだから」と信じてやり続けることで、不思議な巡り合わせ\nが訪れることもあるのです。"
  },
  {
    "id": "q22",
    "kana": "に",
    "leadingKana": "に",
    "fullPhrase": "に：人には きつう言え",
    "explanation": "愛情を持っている人だからこそ、 きつく言えるということ\nがあります。むやみやたらと厳しいことを言う必要はあり\nませんが、時には毅然とした態度で接する必要があります。\nお客様に甘えたり、なぁなぁの関係になったりすると、本\n当に言わなくてはいけないことが言えなくなります。「ここ\nから先は、こうさせてもらう」という線引きが必要なので\nす。\n\nきつく言えるのは、それまでに築いた信頼関係があるから\nこそです。 そして、きつく言った後ほど、 時に甲斐甲斐し\nく、相手の幸せを願っている姿を示す必要があるのです。"
  },
  {
    "id": "q23",
    "kana": "ぬ",
    "leadingKana": "ぬ",
    "fullPhrase": "ぬ：ぬか喜びなんか さしたらあかん",
    "explanation": "期待ばかりを募らせておいて、 実際には何も実現しない\nと、ぬか喜びをさせたことになります。「期待してます」だ\nけではなく、その期待に応えられるように努力しなければ\nなりません。\nぬか喜びは、商いの世界では信用を失う一因となります。\n\n一方で、自分自身がぬか喜びしないように、 結果を早合点\nしない姿勢も大切です。「これは上手くいった」と思って\nも、最後まで確認する。数字を見る。相手の表情を読む。\nそのうえで本当に喜べるようにしたいものです。"
  },
  {
    "id": "q24",
    "kana": "ね",
    "leadingKana": "ね",
    "fullPhrase": "ね：念には念を入れんかい",
    "explanation": "商いの世界では、「うっかり」が命取りになることがあり\nます。確認を怠ったために、大きな損失を招くこともある\nのです。\n念には念を入れて確認する。 相手との認識のズレがないか\nを確かめる。書面に残しておく。 数字を二重三重にチェック\nする。そうした基本動作をおろそかにしてはいけません。\n「大丈夫やろ」と思った時ほど、一呼吸おいて確認を入れる。\nそれが、長く商いを続けていくための鉄則です。"
  },
  {
    "id": "q25",
    "kana": "の",
    "leadingKana": "の",
    "fullPhrase": "の：のど元過ぎても 熱さ忘れんなや",
    "explanation": "一度痛い目にあったことは、時間が経つとつい忘れてしまい\nます。同じ失敗を繰り返してしまうのは、 のど元過ぎれば熱\nさを忘れるからです。\n失敗から学ぶことはたくさんあります。 なぜそうなったのか。\nどこに原因があったのか。 自分の判断はどうだったのか。\n一度ちゃんと振り返り、言葉にしておくことが大切です。\nそして、その教訓を折に触れて思い出す。 周囲にも伝える。\nそれが、自分自身と会社を守る知恵になります。"
  },
  {
    "id": "q26",
    "kana": "は",
    "leadingKana": "は",
    "fullPhrase": "は：歯食いしばる覚悟は できてんのか",
    "explanation": "商いには、どうしても踏ん張らなければならない局面があり\nます。簡単に諦めてしまうのか、 歯を食いしばって踏みとど\nまるのかで、その後の景色は大きく変わります。\n覚悟があるかどうか。 それが問われるのです。\n\n覚悟とは、感情的な勢いではありません。冷静に状況を見\nつめ、それでもなお進むと決めることです。痛みも負担も\n引き受ける。そのうえで、「やる」と決める。その姿勢が、\n周囲の信頼を生み出していくのです。"
  },
  {
    "id": "q27",
    "kana": "ひ",
    "leadingKana": "ひ",
    "fullPhrase": "ひ：引き際を誤ったら あかんで",
    "explanation": "どれだけ良い商いでも、いつかは終わりがきます。引き際を\n誤ると、せっかく築いてきた信用や利益を失ってしまうこと\nがあります。\n「まだいける」「もう少しだけ」と欲をかいているうちに、\n潮目が変わってしまうのです。\n\n引くべき時には引く。 それは逃げではなく、次の一手のた\nめの準備です。終わらせ方が上手い商人は、次の始まりも\n上手く切り出せるのです。"
  },
  {
    "id": "q28",
    "kana": "ふ",
    "leadingKana": "ふ",
    "fullPhrase": "ふ：踏み倒したら あかん",
    "explanation": "支払いを踏み倒す。 約束を反故にする。これらは一時的に\nは自分を楽にするかも知れませんが、 長い目で見れば商い\nの道を自ら閉ざす行為です。\n信用は、お金では買えません。小さな約束を守ることの積み\n重ねが、大きな信用に繋がります。\nどうしても約束が守れない事態になったのであれば、 まず\nは自分から頭を下げに行く。 事情を説明し、誠意を尽くす。\nそれでも信頼関係が続くかどうか。 そこに、その人の商人\nとしての本当の値打ちが現れます。"
  },
  {
    "id": "q29",
    "kana": "へ",
    "leadingKana": "へ",
    "fullPhrase": "へ：変わらんと あかん時もある",
    "explanation": "昔ながらのやり方を守ることは大切ですが、時代が変われば\n通用しなくなることもあります。「うちはずっとこれでやっ\nてきたから」と言って変化を拒んでいると、 気づいた時に\nは取り残されているのです。\n\n変わるべき時に変われるかどうか。 その見極めには勇気が\n要りますが、いつまでも同じ場所にとどまっているだけが\n忠義でも伝統でもありません。\n本質を守りながら、やり方を変えていく。 それが、商いを\n続けていくために必要な姿勢です。"
  },
  {
    "id": "q30",
    "kana": "ほ",
    "leadingKana": "ほ",
    "fullPhrase": "ほ：本音で話せる相手を 持っときや",
    "explanation": "商いの悩みや苦しみは、なかなか外には見せられません。\nそれでも、本音を吐き出せる相手が一人でもいるかどうか\nで、心の持ちようは大きく変わります。\n\n家族かも知れないし、古くからの友人かも知れません。ある\nいは、同じように商売に身を置く仲間かも知れません。\n格好をつけず、弱音も迷いもさらけ出せる相手がいること。\nそれ自体が商人にとって大きな財産です。"
  },
  {
    "id": "q31",
    "kana": "ま",
    "leadingKana": "ま",
    "fullPhrase": "ま：負けるが 勝ちの時もある",
    "explanation": "目先の勝ち負けにこだわっていると、本当に大切なものを失\nってしまうことがあります。\n一歩引くことで、相手の顔を立てる。 一度譲ることで、よ\nり大きな信頼を得る。 そんな場面も少なくありません。\n\n負けるが勝ち。 それは、戦わないという意味ではありませ\nん。本当に守るべきものは何かを見極めたうえで、 あえて\n一歩引くという選択ができるかどうか、ということです。"
  },
  {
    "id": "q32",
    "kana": "み",
    "leadingKana": "み",
    "fullPhrase": "み：身の丈に 合った商いせえ",
    "explanation": "無理をして背伸びをした商いは、どこかで綻びが出てきます。\n見栄や欲に引っ張られて、 自分たちの力量を超えたことを\nしようとすると、 従業員にも取引先にも無理を強いることに\nなります。\n\n身の丈に合った商いとは、 小さくまとまることではありませ\nん。今の自分たちの力と資源を冷静に見つめ、その範囲で\nできる最大限の工夫をすることです。 土台を固めていけば、\n自然と身の丈も広がっていきます。"
  },
  {
    "id": "q33",
    "kana": "む",
    "leadingKana": "む",
    "fullPhrase": "む：無理はするな でも 手は抜くな",
    "explanation": "無理をすれば、一時的には成果が出るかも知れませんが、長\n続きはしません。体も心も壊れてしまっては元も子もないの\nです。\n\n一方で、手を抜いていては、お客様に対しても仲間に対して\nも失礼です。丁寧にやるべき仕事は丁寧にやる。そのうえで、\n無理をし過ぎないバランスを見つけることが大切です。\n\n「今日はここまで」「ここからは明日」。そんな切り替え\nも、長く商いを続けるための知恵です。"
  },
  {
    "id": "q34",
    "kana": "め",
    "leadingKana": "め",
    "fullPhrase": "め：目先ばっかり 見るなや",
    "explanation": "今日・明日の売上も大事です。でも、目先の数字ばかりを\n追いかけていると、 お客様との関係も、会社の将来も痩せ\n細っていきます。\n\n少し先の未来を想像してみる。 一年先、三年先、十年先に、\nどんな商いをしていたいのか。 そのために今、何をしておく\nべきなのか。\n目先のことだけでなく、先のことを考えて動けるかどうかが、\n商人の器を決めていきます。"
  },
  {
    "id": "q35",
    "kana": "も",
    "leadingKana": "も",
    "fullPhrase": "も：儲けても ええ でも 欲張るな",
    "explanation": "商いは、儲けてなんぼです。利益を出せなければ、従業員も\n家族も守れませんし、 次の投資もできません。\n\n大事なのは、「どこまでを良しとするか」です。儲けること\n自体が悪いのではなく、 欲に目がくらんで、約束や信義を\n後回しにしてしまうことが問題なのです。\n\n正当に儲ける。感謝されながら儲ける。そのためには、欲張\nり過ぎない自制心が必要です。"
  },
  {
    "id": "q36",
    "kana": "や",
    "leadingKana": "や",
    "fullPhrase": "や：やれることから 始めんかい",
    "explanation": "大きな構想を描くことは大切ですが、「そのうち」「いつか」\nと言っているだけでは何も変わりません。\n今できることは何か。 小さな一歩でもいいから、今日から\n始める。 それを積み重ねていくうちに、大きな変化になって\nいきます。\n\n完璧を求め過ぎて動けなくなるより、 七割くらいの準備で\n動き出す。 やりながら修正していく。 そんな軽やかな一歩が、\n商いを前に進めていきます。"
  },
  {
    "id": "q37",
    "kana": "ゆ",
    "leadingKana": "ゆ",
    "fullPhrase": "ゆ：ゆっくりやけど 一歩ずつ",
    "explanation": "周りと比べ過ぎると、「自分たちは遅れている」と焦ってしま\nいます。でも、商いの道は競走ではありません。\n\n大事なのは、自分たちなりのペースで、一歩ずつ進んでいく\nことです。昨日より少しでも良くなっているか。 去年より\n一歩でも前に出ているか。 その積み重ねが、やがて大きな差\nになります。\n\n急ぎ過ぎて足元をすくわれるより、確実に一歩一歩を踏みし\nめていく方が、 長い目で見て強い商いになります。"
  },
  {
    "id": "q38",
    "kana": "よ",
    "leadingKana": "よ",
    "fullPhrase": "よ：よく聞いて よく観て 判断せえ",
    "explanation": "情報が溢れている時代だからこそ、何を信じて判断するかが\n大事になっています。\n\n人の話をよく聞く。現場をよく観る。数字もきちんと見る。\nそのうえで、自分の頭で考えて決める。 それが商人の役割\nです。\n\n誰かの意見に流されるだけではなく、 自分なりの物差しを\n持つこと。その物差しを磨き続けること。それが、判断力を\n高めてくれます。"
  },
  {
    "id": "q39",
    "kana": "ら",
    "leadingKana": "ら",
    "fullPhrase": "ら：楽な道ばっかり 選ぶなや",
    "explanation": "楽な道は、最初は気持ちが良いかも知れませんが、成長を\n止めてしまいます。少ししんどい道を選ぶからこそ、鍛えら\nれるのです。\n\n何でもかんでも苦労すれば良い、という話ではありません。\n必要な苦労から逃げないこと。自分の成長や会社の未来に\n繋がる挑戦から逃げないこと。そこにこそ、楽ではないけ\nれど意味のある道があります。"
  },
  {
    "id": "q40",
    "kana": "り",
    "leadingKana": "り",
    "fullPhrase": "り：利他の心 忘れんな",
    "explanation": "自分の利益だけを追いかけていると、 どこかで行き詰まり\nます。商いは、人と人との間で成り立つもの。 相手の得にな\nることを考えられるかどうかが試されています。\n\n利他の心を持つということは、自分を犠牲にすることではあ\nりません。 相手の喜びと自分の喜びが重なるポイントを探\nることです。\n\n「自分だけ」が得をする商いは長続きしません。お互いにとっ\nて良い形を探ろうとする姿勢こそが、信頼を生むのです。"
  },
  {
    "id": "q41",
    "kana": "る",
    "leadingKana": "る",
    "fullPhrase": "る：ルール決めたら 守りぃや",
    "explanation": "自分たちで決めたルールを、自分たちで破っていては信用を\n失います。「うちの決まりやから」と言うだけでなく、その\n決まりを自ら守り続けることが大切です。\n\nルールは、守るためにあります。状況に合わせて見直すこと\nはあっても、都合の良いときだけ無視していては、誰も従わ\nなくなります。\n小さな約束を守ること。 決めたことをやり切ること。その積\nみ重ねが、会社全体の信頼につながっていきます。"
  },
  {
    "id": "q42",
    "kana": "れ",
    "leadingKana": "れ",
    "fullPhrase": "れ：連れを大事に せえ",
    "explanation": "一緒に働く仲間、一緒に商いをしている相手。そういう「連\nれ」をどれだけ大事にできているかが、その人の器を映し\n出します。\n\n自分の都合だけで相手を振り回していないか。 いつも感謝\nの気持ちを持って接しているか。 苦しい時には助け合えて\nいるか。\n\n連れを大事にできる人の周りには、自然と人が集まってきま\nす。それが、商いにとって何よりの財産です。"
  },
  {
    "id": "q43",
    "kana": "ろ",
    "leadingKana": "ろ",
    "fullPhrase": "ろ：ロマン 忘れたら あかん",
    "explanation": "数字や効率ばかりを追いかけていると、 いつの間にか心が\n乾いてきます。 商いにはロマンが必要です。\n\n自分は何のためにこの商いをしているのか。 どんな未来を\nつくりたいのか。 どんな人たちを笑顔にしたいのか。\nその想いがロマンです。\n\nロマンを語れる人は、周りの人の心も動かします。 夢を見せ\nながら、地に足のついた商いを続けていく。 その両方を大事\nにしたいものです。"
  },
  {
    "id": "q44",
    "kana": "わ",
    "leadingKana": "わ",
    "fullPhrase": "わ：忘れもん ないか",
    "explanation": "日々の忙しさの中で、本当に大切なことを置き去りにして\nいないか。立ち止まって振り返る時間も必要です。\n\nお世話になった人へのお礼。約束していた一言。やりかけの\nまま放ってある仕事。 そういった「忘れもの」をそのままに\nしておくと、いつか大きなしっぺ返しになります。\n\nふと立ち止まり、心の中と机の上を見渡してみる。 そこで見\nつけた「忘れもの」を一つずつ片づけていくことが、次の一歩\nを軽くしてくれます。"
  },
  {
    "id": "q45",
    "kana": "を",
    "leadingKana": "を",
    "fullPhrase": "を：をとこ気 見せんかい",
    "explanation": "性別のことではありません。 「男気」とは、ここぞという時\nに責任を引き受ける覚悟のことです。\n\n逃げずに前に出る。 自分が矢面に立つ。損な役回りでも、そ\nれを引き受ける。 そんな姿勢を周りの人はよく見ています。\n\n口先だけで格好をつけるのではなく、 行動で示すこと。背中\nで語ること。それが、本当の「をとこ気」です。"
  },
  {
    "id": "q46",
    "kana": "ん",
    "leadingKana": "ん",
    "fullPhrase": "ん：ん？ それで ほんまに ええんか",
    "explanation": "最後の一歩を踏み出す前に、「ほんまにそれでええんか」と\n自分に問い直す習慣を持ちたいものです。\n\n勢いで決めてしまう前に、一瞬立ち止まる。 自分の欲や都合\nだけで動いていないか。 相手の立場や、少し先の未来まで想\n像できているか。 \n\nその「ん？」という違和感を無視せずに、きちんと向き合う\nことが、商いを誤らないための最後の砦です。"
  }
];

    // ====== 状態管理 ======
    let currentIndex = 0;         // 出題順インデックス
    let questionOrder = [];       // 出題順（questions のインデックスシャッフル）
    let score = 0;
    let canAnswer = false;
    let hasAnswered = false;
    let timerId = null;
    let questionStartTime = null;

    // ====== DOM ======
    const leadingKanaEl   = document.getElementById("leadingKana");
    const fullPhraseEl    = document.getElementById("fullPhrase");
    const cardsGridEl     = document.getElementById("cardsGrid");
    const timerTextEl     = document.getElementById("timerText");
    const scoreTextEl     = document.getElementById("scoreText");
    const messageEl       = document.getElementById("message");
    const explanationEl   = document.getElementById("explanation");
    const nextButtonEl    = document.getElementById("nextButton");
    const questionCountEl = document.getElementById("questionCount");
    const progressEl      = document.getElementById("progress");
    const finalResultEl   = document.getElementById("finalResult");

    // ====== ユーティリティ ======
    function shuffleArray(arr) {
      const a = arr.slice();
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function resetTimer() {
      if (timerId !== null) {
        clearInterval(timerId);
        timerId = null;
      }
      timerTextEl.textContent = "--.-";
    }

    function updateTimer() {
      if (!questionStartTime) return;
      const elapsed   = Date.now() - questionStartTime;
      const remaining = Math.max(0, MAX_TIME_MS - elapsed);
      const sec       = remaining / 1000;
      timerTextEl.textContent = sec.toFixed(1);

      if (remaining <= 0 && !hasAnswered) {
        handleTimeout();
      }
    }

    function startTimer() {
      resetTimer();
      questionStartTime = Date.now();
      timerId = setInterval(updateTimer, 100);
    }

    function stopTimer() {
      if (timerId !== null) {
        clearInterval(timerId);
        timerId = null;
      }
    }

    function setMessage(text, type) {
      messageEl.textContent = text;
      messageEl.classList.remove("ok", "ng");
      if (type === "ok") messageEl.classList.add("ok");
      if (type === "ng") messageEl.classList.add("ng");
    }

    function getCurrentQuestion() {
      const qIndex = questionOrder[currentIndex];
      return questions[qIndex];
    }

    // ====== カード（正解＋不正解3枚）を作る ======
    function buildCardsForQuestion(q) {
      const kana = q.kana;

      const correctKey = kanaToFileKey[kana];
      const correctCard = {
        src: `images/${correctKey}.jpg`,
        alt: `${kana} の札`,
        isCorrect: true
      };

      const wrongKanaPool = kanaList.filter(k => k !== kana);
      const wrongKanaSelected = shuffleArray(wrongKanaPool).slice(0, 3);

      const wrongCards = wrongKanaSelected.map(k => {
        const key = kanaToFileKey[k];
        return {
          src: `images/${key}.jpg`,
          alt: `${k} の札`,
          isCorrect: false
        };
      });

      return shuffleArray([correctCard, ...wrongCards]);
    }

    // ====== 問題表示 ======
    function showQuestion() {
      const q = getCurrentQuestion();
      if (!q) return;

      canAnswer = false;
      hasAnswered = false;
      resetTimer();
      setMessage("", null);
      explanationEl.style.display = "none";
      explanationEl.textContent = "";
      nextButtonEl.style.display = "none";
      finalResultEl.textContent = "";

      const questionNumber = currentIndex + 1;
      questionCountEl.textContent = `第${questionNumber}問`;
      progressEl.textContent = `${questionNumber} / ${questions.length}`;

      leadingKanaEl.textContent = q.leadingKana;
      fullPhraseEl.textContent = "";
      cardsGridEl.innerHTML = "";

      setTimeout(() => {
        const cards = buildCardsForQuestion(q);
        renderCards(cards);
        canAnswer = true;
        startTimer();
      }, 1000);

      setTimeout(() => {
        fullPhraseEl.textContent = q.fullPhrase;
      }, 2000);
    }

    function renderCards(cards) {
      cardsGridEl.innerHTML = "";

      cards.forEach(card => {
        const cardEl = document.createElement("div");
        cardEl.className = "card";
        cardEl.dataset.correct = card.isCorrect ? "1" : "0";

        const coverEl = document.createElement("div");
        coverEl.className = "kana-cover";

        const imgEl = document.createElement("img");
        imgEl.src = card.src;
        imgEl.alt = card.alt;

        cardEl.appendChild(imgEl);
        cardEl.appendChild(coverEl);

        cardEl.addEventListener("click", () => {
          handleAnswer(cardEl, card.isCorrect);
        });

        cardsGridEl.appendChild(cardEl);
      });
    }

    // ====== 回答処理 ======
    function handleAnswer(cardEl, isCorrect) {
      if (!canAnswer || hasAnswered) return;

      hasAnswered = true;
      canAnswer = false;
      stopTimer();

      const elapsed   = Date.now() - questionStartTime;
      const remaining = Math.max(0, MAX_TIME_MS - elapsed);
      let deltaScore  = 0;

      const allCards = cardsGridEl.querySelectorAll(".card");
      allCards.forEach(c => c.classList.add("disabled"));

      allCards.forEach(c => {
        if (c.dataset.correct === "1") {
          c.classList.add("correct");
        }
      });

      if (isCorrect) {
        const sec = remaining / 1000;
        deltaScore = Math.round(sec) * POINTS_PER_SECOND;
        score += deltaScore;

        cardEl.classList.add("correct");
        setMessage(`正解！ +${deltaScore} 点`, "ok");
      } else {
        deltaScore = WRONG_PENALTY;
        score += deltaScore;
        cardEl.classList.add("wrong");
        setMessage(`残念… ${WRONG_PENALTY} 点`, "ng");
      }

      scoreTextEl.textContent = score.toString();

      const q = getCurrentQuestion();
      explanationEl.textContent = q.explanation;
      explanationEl.style.display = "block";

      if (currentIndex < questionOrder.length - 1) {
        nextButtonEl.textContent = "次の問題へ";
      } else {
        nextButtonEl.textContent = "結果を見る";
      }
      nextButtonEl.style.display = "inline-block";
    }

    function handleTimeout() {
      if (hasAnswered) return;
      hasAnswered = true;
      canAnswer = false;
      stopTimer();

      const allCards = cardsGridEl.querySelectorAll(".card");
      allCards.forEach(c => c.classList.add("disabled"));

      allCards.forEach(c => {
        if (c.dataset.correct === "1") {
          c.classList.add("correct");
        }
      });

      score += WRONG_PENALTY;
      scoreTextEl.textContent = score.toString();
      setMessage(`時間切れ！ ${WRONG_PENALTY} 点`, "ng");

      const q = getCurrentQuestion();
      explanationEl.textContent = q.explanation;
      explanationEl.style.display = "block";

      if (currentIndex < questionOrder.length - 1) {
        nextButtonEl.textContent = "次の問題へ";
      } else {
        nextButtonEl.textContent = "結果を見る";
      }
      nextButtonEl.style.display = "inline-block";
    }

    function goToNext() {
      if (currentIndex < questionOrder.length - 1) {
        currentIndex += 1;
        showQuestion();
      } else {
        finalResultEl.textContent =
          `全${questions.length}問終了！ あなたのあきんどスコアは ${score} 点です。`;
        nextButtonEl.style.display = "none";
      }
    }

    nextButtonEl.addEventListener("click", goToNext);

    // ====== ゲーム開始 ======
    function startGame() {
      score = 0;
      scoreTextEl.textContent = "0";

      const indices = [];
      for (let i = 0; i < questions.length; i++) {
        indices.push(i);
      }
      questionOrder = shuffleArray(indices);
      currentIndex = 0;

      showQuestion();
    }

    startGame();
  </script>
</body>
</html>
